参考

- https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence

## 概要

运算符优先级的作用：指导表达式内运算符的匹配与运算顺序。

学习要点有三个：关联性、语法结构、优先级
判别优先级技巧：“括号法则”。解析表达式，每次给高优先级的运算符加括号，加好后，继续分析表达式，再找出高优先级的加括号。指导最简式。

### 关联性

关联性决定了相同优先级运算符的执行顺序。

例如 `a=b=1`，赋值运算符的关联性是“从右向左”。所以当两个赋值运算符在同一个表达式内，执行顺序如下：

1. 执行 `b=1` 后返回值 `1`。
2. 执行 `a=1`。

### 语法结构

指运算符的匹配语法，示例如下：

- 赋值运算符：`... = ...` 匹配 `a = 1`。
- 算符运算符：`a + b + c` 匹配 `a + b` 与 `b + c`，由于算术运算符的关联性从左至右，所以等效于 `( a + b ) + c`。

### “括号法则”示例

`1 + 2 * 3` 等效于 `1 + ( 2 * 3 )`

> 解释：算术 `*` > 算术 `+`

`false || false && true || true` 等效于 `false || ( false && true ) || true`

> 解释：逻辑 `&&` > 逻辑 `||`

`5 > 3 && 8 < 4 + (a = 5)` 等效于 `( 5 > 3 ) && ( 8 < ( 4 + ( a = 5 ) ) )`

> 解释：算术 `+` > 关系 `<` > 逻辑 `&&`

`new foo.bar()` 等效于 `new ( foo.bar )()`

> 解释：`new无参` < 属性 = 函数，括属性

`new new foo().bar()` 等效于 `new ( ( new foo() ).bar )()`

> 解释：`new无参` < 属性 = 函数，括属性

`new new foo.bar()` 等效于 `new (new (foo.bar)())`

> 解释：`new无参` < `new有参`，括`new有参`
> 注意：new 有无括号效果一致。

### 运算符优先级：

- 下表中的 ... 用来匹配运算元素。
- 优先级由高至低，同级由左至右。
- 记忆口令：括，[函属，可选链，new 有]，无，右]左]幂]，算]位关等，位逻 3 逻 2，三赋 yield 展逗。

#### 详表（节选）

20

- [ ] () 括号

19

- [ ] …() 函数执行
- [ ] … . … 访问属性
- [ ] ?. 可选链 optional chaining
- [ ] new …(…) 有参数

18

- [ ] new … 无参数（右向左）

17

- [ ] … ++
- [ ] … --

16 左侧操作符（右向左）

- [ ] ! … 非
- [ ] - …
- [ ] ~ …
- [ ] ++ …
- [ ] typeof …
- [ ] void …
- [ ] delete …
- [ ] await …

15

- [ ] … \*\* … 幂（右向左）

14 算术

- [ ] … \* …
- [ ] … / …
- [ ] … % …

13

- [ ] … + …
- [ ] … - …

12 位

- [ ] … << … 位

11 关系（比较）

- [ ] … < … 小于
- [ ] … in …
- [ ] … instanceof …

10

- [ ] … == … 等号

9 位逻辑

- [ ] … & … 按位与

8

- [ ] … ^ … 按位异或

7

- [ ] … | … 按位或

6 逻辑

- [ ] … && …

5

- [ ] … || …

4 三元（右向左）

- [ ] … ? … : …

3 赋值（右向左）

- [ ] … = …
- [ ] … += …

2 （右向左）

- [ ] yield …

1

- [ ] … … 展开

0

- [ ] … , … 逗号
